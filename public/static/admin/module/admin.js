layui.define(["contextMenu","iziToast"],function(exports){"use strict";var jquery=layui.jquery;var form=layui.form;var rate=layui.rate;var table=layui.table;var slider=layui.slider;var upload=layui.upload;var element=layui.element;var laydate=layui.laydate;var iziToast=layui.iziToast;var colorpicker=layui.colorpicker;var contextMenu=layui.contextMenu;var tabfilter="swiftadmin-tabs";var body=".layui-body";var layoutbody=".layui-layout-body";var layoutadmin=".layui-layout-admin";var tabs=body+">.layui-tab";var flexibleid="flexible";var menufilter="lay-side-menu";var menutopfilter="lay-top-menu";var sideshrink="layadmin-side-shrink";var sidespread="layadmin-side-spread-sm";var iconshrink="layui-icon-shrink-right";var iconspread="layui-icon-spread-left";var bodyshade='<div class="layadmin-body-shade" sa-event="shade"></div>';var shadeclass=".layadmin-body-shade";var layercontent=".layui-layer-content";var baseUrl=window.location.href.split("://")[1],_begin=baseUrl.indexOf("/"),_end=baseUrl.indexOf(".php")+4,_header=baseUrl.substring(_begin,_end),uploadUrl=_header+"/upload/upload";var admin={init:undefined,name:"admin.js",table:"swiftadmin",version:"1.0 beta",authMenu:_header+"/system.admin/getauthmenus",pageTabs:true,cacheTab:true,maxTabNum:20,TabLists:[],callback:{},callstatus:false,callString:"admin.callback.",activeTab:undefined,loading:function(e){var a=admin.getConfig("TabLists");var i=admin.getConfig("activeTab");if(a==null||i==null){admin.render({id:e.urls,title:e.title,urls:e.urls})}var t=e.inits==undefined?true:e.inits;if(t&&typeof a==="object"){if(admin.pageTabs===true){for(var n in a){admin.render({id:a[n].id,urls:a[n].urls,title:a[n].title})}}else{admin.render({id:a.id,urls:a.urls,title:a.title});admin.activeTab=a.id;admin.setConfig("activeTab",a.urls);admin.activeMenu(a.id);admin.setBreadcrumb(a.urls,a.title)}element.tabChange(tabfilter,i)}},render:function(e){if(!e.urls){iziToast.info({message:admin.lang("Menu addr not empty!")});return}var a=e.id||e.urls;var i=e.urls;var t=e.title;if(admin.pageTabs){if(admin.TabLists.length+1>=admin.maxTabNum){iziToast.info({message:admin.lang("Max Open")+admin.maxTabNum+admin.lang("TAB")});return false}var n=jquery(tabs+'>.layui-tab-title [lay-id="'+a+'"]');if(n&&n.length>=1){element.tabChange(tabfilter,a);return false}if(t.indexOf("layui-icon")!=-1){t='<span class="title">'+(t?t:"")+"</span>"}else{t='<em class="circle"></em><span class="title">'+(t?t:"")+"</span>"}element.tabAdd(tabfilter,{id:a,title:t,content:'<iframe lay-id="'+i+'" src="'+i+'" frameborder="0" onload="layui.admin.removeLoading(this)"  class="swiftadmin-iframe"></iframe>'});admin.TabLists.push(e);if(admin.cacheTab){admin.setConfig("TabLists",admin.TabLists)}var l=admin.getStorage("nav");if(l==="left"||typeof l==="undefined"){admin.setBreadHtml()}if(admin.TabLists.length>=2&&l==="left"){admin.setBreadcrumb(i,t)}admin.showLoading(jquery('iframe[lay-id="'+i+'"]').parent());element.render("breadcrumb");element.tabChange(tabfilter,a)}else{var r=jquery(".swiftadmin-iframe");if(typeof r==="undefined"||r.length<=0){admin.setBreadHtml();var s='<div id="swiftadmin-iframe">';s+=' <iframe lay-id="'+i+'" src="'+i+'" frameborder="0" onload="layui.admin.removeLoading(this)" class="swiftadmin-iframe"></iframe>';s+="</div>";jquery(layoutadmin+">"+body).html(s)}else{r.attr("lay-id",i);r.attr("src",i);admin.setBreadcrumb(i,t)}admin.showLoading(jquery("#swiftadmin-iframe"));if(admin.cacheTab){admin.setConfig("TabLists",e)}admin.setConfig("activeTab",i);admin.activeTab=i;element.render("breadcrumb")}},saPHPInit:function(e=false){var a=admin.getConfig("authNode3");if(typeof a==="undefined"||e){a=admin.event.getAjaxData(admin.authMenu);admin.setConfig("authNode",a)}const i=admin.getNavHtml(a.UserAuthMenu);if(admin.getStorage("nav")==="hybrid"){admin.getNavhybrid(a.UserAuthMenu)}else if(admin.getStorage("nav")==="top"){parent.layui.jquery(".layui-nav-top").html(i)}else{parent.layui.jquery(".layui-nav-tree").html(i)}jquery(".layui-nav-top").find("span.layui-nav-bar").remove();if(admin.getStorage("nav")==="top"){element.on("nav("+menutopfilter+")",function(e){var a=jquery(this);a.parent("dd").siblings().children(".layui-nav-third").hide();a.parent("dd").siblings().children("dl").children("dl").hide();admin.clickRender(e)});jquery(".layui-side-menu").hide();jquery(".layui-layout-left").css("left","0");jquery(".layui-footer").css("left","0");jquery(layoutadmin+">"+body).css("left","0");jquery('[sa-event="flexible"]').removeAttr("sa-event");jquery(".layui-third-class").on("click",function(e){var a=jquery(this);a=a.parent("dd").siblings();a.children(".layui-nav-third").hide();jquery(this).next().show();var i=jquery(this),t=i.parent().find(">.layui-nav-third");t.css({top:"0px",left:i.outerWidth()+2})})}if(admin.getStorage("nav")==="hybrid"){jquery(".layui-nav-head .layui-nav-item a").on("click",function(e){var a=jquery(this),i=a.attr("lay-nav-bind");if(typeof i!=="undefined"){jquery("div[class^='swift-admin']").hide();jquery("."+i).show()}})}parent.layui.element.render("nav");if(e!==false){parent.layui.admin.activeMenu(admin.getConfig("activeTab"))}},clickRender:function(e){var a=jquery(e);var i=a.attr("lay-id");var t=a.attr("lay-href");if(!i){i=t}if(t&&t!="javascript:;"){var n=a.attr("sa-title");n||(n=a.text().replace(/(^\s*)|(\s*$)/g,""));admin.render({id:i,urls:t,title:n})}if(admin.screen()<2){admin.flexible()}},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},getPath:function(){var e=document.currentScript?document.currentScript.src:function(){var e=document.scripts,a=e.length-1,i;for(var t=a;t>0;t--){if(e[t].readyState==="interactive"){i=e[t].src;break}}return i||e[a].src}();return e.substring(0,e.lastIndexOf("/")+1)},setBreadHtml:function(){var e='<div class="layui-breadcrumb-header layui-breadcrumb" lay-separator="/">';e+='      <a lay-href="#">'+admin.lang("Home")+"</a>";e+='      <span class="breadcrumb">';e+='          <a lay-href="#">Dashboard</a>';e+="      </span>";e+="   </div>";if(jquery(".layui-breadcrumb-header").length<=0){jquery(".layui-nav-head").before(e);jquery(".layui-nav-head").hide()}if(admin.screen()<2){jquery(".layui-breadcrumb-header").hide()}},setBreadcrumb:function(e,a){var i="",t=jquery('.layui-nav-tree li [lay-href="'+e+'"]');var n=jquery(t).parents().find(".layui-nav-itemed");for(var l=0;l<n.length;l++){var r=jquery(n[l]).find('[lay-href="'+e+'"]');if(r.length>=1){var s=jquery(n[l]).find("a:first").text();i+='<a lay-href="#" >'+s+'</a><span lay-separator="">/</span>'}}i+='<a lay-href="'+e+'">'+a+"</a>";jquery(".breadcrumb").html(i)},flexible:function(e){var a=jquery(layoutbody),i=jquery("#"+flexibleid);var t=admin.screen();if(e){i.removeClass(iconspread).addClass(iconshrink);if(t<2){a.addClass(sidespread)}else{a.removeClass(sidespread)}a.removeClass(sideshrink)}else{i.removeClass(iconshrink).addClass(iconspread);if(t<2){a.removeClass(sideshrink)}else{a.addClass(sideshrink)}a.removeClass(sidespread)}},screen:function(){var e=jquery(window).width();if(e>1200){return 3}else if(e>992){return 2}else if(e>768){return 1}else{return 0}},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;if(typeof a!=="undefined"&&a){a.call(e)}},exitScreen:function(){var e=document.documentElement;if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}},lang:function(e){var a=admin.getStorage("language");var i={"zh-cn":{"this undefined":"对象未定义","Plase Close HomePage":"请不要关闭主页！","lay-url NoSeting":"未设置","NO Permissions!":"没有权限！","File Upload...":"文件上传中","The lack of DIV elements":"请添加包含多图上传的DIV元素！","Menu addr not empty!":"菜单地址不能为空","Max Open":"消息",TAB:"选项卡",Tips:"提示",Home:"首页","not lay-url attr":"按钮缺少 url 属性","Plase check data":"请选择数据","sure you want to batch operation?":"确定要批量操作吗？","Sure you want to delete":"确定要删除","controller or action undefined!":"控制器或方法JS未定义！"}};if(a==="en-us"){return e}if(typeof i[a]==="undefined"){a="zh-cn"}return i[a][e]?i[a][e]:e},rollPage:function(e,a){var i=jquery(tabs+">.layui-tab-title");var t=i.scrollLeft();if("left"===e){i.animate({scrollLeft:t-120},100)}else{if("auto"===e){var n=0;i.children("li").each(function(){if(jquery(this).hasClass("layui-this")){return false}else{n+=jquery(this).outerWidth()}});i.animate({scrollLeft:n-120},100)}else{i.animate({scrollLeft:t+120},100)}}},activeMenu:function(e){var a=admin.getStorage("nav")||"left";jquery(".layui-nav li").removeClass("layui-this");jquery(".layui-nav li").removeClass("layui-nav-itemed");jquery(".layui-nav li dd").removeClass("layui-this");jquery(".layui-nav li dd").removeClass("layui-nav-itemed");var i=jquery('.layui-nav li dd [lay-href="'+e+'"]');if(a==="hybrid"){var t=jquery('.layui-nav-tree [lay-href="'+e+'"]').parents("div").attr("class");if(typeof t!=="undefined"){jquery('[lay-nav-bind="'+t).parent("li").addClass("layui-this")}jquery("div[class^='swift-admin']").hide();jquery("."+t).show()}if(i&&i.length>0&&a!=="top"){i.parent("dd").addClass("layui-this");i.parent("dd").parents("dd").addClass("layui-nav-itemed");i.parent("dd").parents("li").addClass("layui-nav-itemed")}else{jquery('ul li [lay-href="'+e+'"]').parent().addClass("layui-this")}},checkAuth:function(e){var a=admin.getConfig("authNode");var e=!e?"":e;if(e.indexOf("http://")===-1){e=e.replace(_header,"").replace(".html","");e=e.substring(1);var i=e.substring(0,e.indexOf("/"));var t=e.substring(e.indexOf("/")+1);if(t.indexOf("/")!==-1){t=t.substring(0,t.indexOf("/"))}else if(t.indexOf("?")!==-1){t=t.substring(0,t.indexOf("?"))}e=i+":"+t}var n=a.UserGroupId.split(",");if(!n.includes("1")&&e.indexOf("http://")===-1&&a.UserAuth.indexOf(e)===-1){return false}return true},setConfig:function(e,a){var i=admin.table+"_template";if(a!=null&&a!=="undefined"){layui.sessionData(i,{key:e,value:a})}else{layui.sessionData(i,{key:e,remove:true})}},getConfig:function(e){var a=admin.table+"_template";var i=layui.sessionData(a);if(i){return i[e]}else{return false}},setStorage:function(e,a){var i=admin.table+"_system";if(a!=null&&a!=="undefined"){layui.data(i,{key:e,value:a})}else{layui.data(i,{key:e,remove:true})}},getStorage:function(e){var a=admin.table+"_system";var i=layui.data(a);if(i){return i[e]}else{return false}},refresh:function(a){if(a==null||a==undefined){return false}if(!admin.pageTabs){var i=jquery('iframe[lay-id="'+a+'"]');jquery("#loading").show();return i[0].contentWindow.location.reload(true)}var i=jquery(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<i.length;e++){var t=jquery(i[e]).attr("lay-id");if(t==a){i[e].contentWindow.location.reload(true);jquery(i[e]).next("#loading").css({overflow:"hidden",display:"block"})}}},showLoading:function(e){var a=this.getloadingHtml(),i=jquery(e).children("#loading");if(i.length<=0){jquery(e).append(a)}else{i.show()}},removeLoading:function(e){typeof e===undefined&&(e="body");var a=jquery(e).next("#loading");a&&a.fadeOut(500)},getloadingHtml:function(){var e='<div id="loading">';e+='<div class="loader">';e+='<div class="ant-spin ant-spin-spinning" >';e+='<span class="ant-spin-dot ant-spin-dot-spin">';e+='<i class="ant-spin-dot-item"></i>';e+='<i class="ant-spin-dot-item"></i>';e+='<i class="ant-spin-dot-item"></i>';e+='<i class="ant-spin-dot-item"></i>';e+=" </span></div></div></div>";return e},getNavHtml:function(e,a){var i="",t=admin.getStorage("nav")||"left";for(var n=0;n<e.length;n++){var l=e[n];if(l.children&&l.router==="#"){if(l.pid===0||t==="hybrid"&&a!=="parent"){i+='<li class="layui-nav-item">'}else{i+="<dd>";l.fixed=true}if("left"===t||t==="hybrid"){i+='<a href="javascript:;">'}else{if(l.pid===0){i+='<a href="javascript:;">'}else{i+='<a href="javascript:;" class="layui-third-class" >'}}if(l.icons&&(t==="left"||t==="hybrid")){i+='<i class="layui-icon '+l.icons+'"></i>'}if(l.pid===0&&t==="left"){i+="<cite>"+l.title+"</cite>"}else if(a!=="parent"){i+=l.title}else{i+=l.title}if("left"===t||t==="hybrid"){i+='</a><dl class="layui-nav-child">'}else{if(l.pid===0||t==="hybrid"||t==="left"){i+='</a><dl class="layui-nav-child">'}else{i+='<i class="layui-icon layui-icon-right"></i></a><dl class="layui-nav-third">'}}if(t==="hybrid"){i+=this.getNavHtml(l.children,"parent")}else{i+=this.getNavHtml(l.children,a+n)}i+="</dl>"}else{if(l.pid===0||t==="hybrid"&&a!=="parent"){i+='<li class="layui-nav-item" >';if(l.router=="#"){i+='<a href="javascript:;" >'}else{i+='<a href="javascript:;" target="_self" lay-href="'+baseUrl.substring(_begin,_end)+l.router+'">'}if(l.icons&&(t==="left"||t==="hybrid")){i+='<i class="layui-icon '+l.icons+'"></i>'}i+="<cite>"+l.title+"</cite>";i+="</a></li>"}else{if(l.router=="#"){i+='<dd><a href="javascript:;">'}else{i+='<dd><a lay-href="'+baseUrl.substring(_begin,_end)+l.router+'">'}if(l.icons&&(t==="left"||t==="hybrid")){i+='<i class="layui-icon '+l.icons+'"></i>'}i+=l.title+"</a></dd>"}}if(typeof l.fixed!=="undefined"){i+="</dd>"}if(l.pid===0||t==="hybrid"&&a!=="parent"){i+="</li>"}if(l.id==3&&"left"===t){i+='<div class="layui-other-set">设置</div>  '}}return i},getNavhybrid:function(i,e){var t="",n="";for(let a=0;a<i.length;a++){const e=i[a],l="swift-admin-"+(a+1);if(e.pid===0){t+='<li class="layui-nav-item layui-hide-xs ';if(a===0){t+="layui-this"}t+='">';try{if(!e.children){t+='<a href="javascript:;" lay-nav-bind="'+l+'" sa-event="tabs" lay-url="'+_header+e.router;t+='" lay-title="'+e.title+'" >'+e.title+"</a>"}else{t+='<a href="javascript:;" lay-nav-bind="'+l+'" >'+e.title+"</a>"}t+="</li>"}catch(e){console.log(e)}i[a]["nav"]=l}if(e.children&&e.router==="#"){n+='<div class="'+e.nav+'"';if(a===0){n+='style="display:block;"'}n+=">";n+=admin.getNavHtml(e.children);n+="</div>"}}jquery(".layui-nav-top").html(t);jquery(".layui-nav-tree").html(n)},getStyleCss:function(){var e='<style id="style-light">';e+=".layadmin-setTheme-side, .layui-side-menu,.layui-layout-admin .layui-logo,.layui-nav-itemed>.layui-nav-child{";e+="background-color: #fff!important;";e+="color: #000;}";e+=".layui-side-menu .layui-nav .layui-nav-item>a,";e+=".layui-nav-tree .layui-nav-child,";e+=".layui-nav-itemed>a, .layui-nav-tree .layui-nav-title a, .layui-nav-tree .layui-nav-title a:hover,";e+=".layui-side .layui-logo h1,";e+=".layui-side-menu .layui-nav .layui-nav-item>a, .layui-nav-tree .layui-nav-child a,";e+=".layui-layout-admin .layui-side .layui-nav .layui-other-set {";e+="color: #000!important;}";e+=".layui-nav-tree .layui-nav-child, .layui-nav-tree .layui-nav-child a:hover {color: #1890ff!important;}";e+=".layui-nav-tree .layui-nav-child .layui-this a { color: #fff!important;}";e+=".layui-nav .layui-nav-more { border-top-color: rgba(0,0,0,.7);}";e+=".layui-nav .layui-nav-mored, .layui-nav-itemed>a .layui-nav-more {border-color: transparent transparent #000;}";e+=".layadmin-side-shrink .layui-side .layui-nav .layadmin-nav-hover>.layui-nav-child:before{background-color: #fff; }";e+=".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-itemed>a{background: #f2f2f2;}";e+="</style>";return e},setTheme:function(){var a=admin.getStorage("theme");a=a==="blue"?"":a;if(admin.getStorage("pageTabs")){var i=top.layui.$(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<i.length;e++){jquery(i[e]).contents().find("body").attr("id",a)}}else{top.layui.$("iframe").contents().find("body").attr("id",a)}top.layui.$("body").attr("id",a)},setDropStyle:function(){var e=admin.getStorage("dropstyle");if(typeof e!=="undefined"){top.layui.$(".layui-nav-tree").removeClass("arrow1 arrow2 arrow3");top.layui.$(".layui-nav-tree").addClass(e)}},setlayFluid:function(){var a=admin.getStorage("layout");var i='<style id="lay-fluid">.layui-fluid{padding: 50px;}</style>';if(admin.getStorage("pageTabs")&&typeof a!=="undefined"){var t=top.layui.$(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<t.length;e++){if(a==="fixed"){if(jquery(t[e]).contents().find("head").find("#lay-fluid").length<=0){jquery(t[e]).contents().find("head").append(i)}}else{jquery(t[e]).contents().find("#lay-fluid").remove()}}}else if(typeof a!=="undefined"){if(a==="fixed"){if(top.layui.$("iframe").contents().find("#lay-fluid").length<=0){top.layui.$("iframe").contents().find("head").append(i)}}else{top.layui.$("iframe").contents().find("#lay-fluid").remove()}}},setOpenHeader:function(){var e=admin.getStorage("openheader");if(e===false){top.layui.$(".layui-header,.layui-logo").hide();top.layui.$(".layui-nav-tree,.layui-body").css({top:"0px","margin-top":"0px"})}else if(e===true){top.layui.$(".layui-header,.layui-logo").show();top.layui.$(".layui-nav-tree").css("margin-top","60px");top.layui.$(".layui-body").css("top","50px")}},setOpenFooter:function(){var e=admin.getStorage("openfooter");if(e===false){top.layui.$(".layui-footer").hide()}else if(e===true){top.layui.$(".layui-footer").show()}},renderUpload:function(){layui.upload.render({elem:"*[lay-upload]",url:uploadUrl,method:"post",accept:"file",before:function(e){iziToast.info({message:admin.lang("File Upload..."),timeout:3e4})},done:function(e,a,i){iziToast.destroy();var t=jquery(this.item).attr("lay-input"),n=jquery(this.item).attr("lay-images"),l=jquery(this.item).attr("lay-imglist"),r={input:t,images:n,imglist:l};if(admin.event.callfunc(this.item,{res:e,index:a,upload:i},r)||admin.callstatus===true){return admin.callstatus=false}if(e.code==200){iziToast.success({message:e.msg});if(typeof l!=="undefined"){if(jquery("."+l).length>0){var s='<div class="layui-imglist-images" >';s+='<a href="'+e.url+'" class="layui-upload-imglist" target="_blank >';s+='<img src="'+e.url+'" alt="" class="layui-upload-images">';s+="</a>";s+="</div>";jquery("."+l).append(s)}else{iziToast.error({message:admin.lang("The lack of DIV elements")})}}else{if(typeof t!=="undefined"){jquery("."+t).val(e.url)}if(typeof n!=="undefined"){jquery("."+n).val(e.url)}}}else{iziToast.error({message:e.msg})}}})},renderDate:function(){var e=jquery("*[lay-datetime]");e.each(function(e){laydate.render({elem:this,type:"datetime",format:"yyyy-MM-dd HH:mm:ss"})})},renderPicker:function(){var e=jquery("*[lay-colorpicker]");e.each(function(e,a){colorpicker.render({elem:this,color:jquery(a).attr("lay-value"),done:function(e){jquery("."+jquery(a).attr("lay-colorpicker")).val(e)}})})},renderStars:function(){layui.each(jquery("*[lay-stars]"),function(e,a){var i=jquery(this),t=i.attr("lay-stars"),n=i.attr("lay-url")||undefined,l=i.attr("lay-object")||undefined,r=i.attr("lay-theme")||"#fadb14",s=i.attr("lay-readonly")||false;rate.render({elem:a,theme:r,readonly:s,value:i.attr("lay-value"),choose:function(e){jquery.get(n,{id:i.attr("lay-object"),stars:e},function(e){if(e.code==200){iziToast.success({message:e.msg})}else{iziToast.error({message:e.msg})}},"json")}})})},renderSlider:function(){layui.each(jquery("*[lay-slider]"),function(e,a){var i=jquery(this),t=i.attr("lay-slider"),n=i.attr("lay-theme")||"#1E9FFF";slider.render({elem:a,theme:n,value:jquery(a).attr("lay-value"),change:function(e){jquery("."+t).val(e)}})})},renderTips:function(){jquery(document).on("mouseenter","*[lay-tips]",function(){var e=jquery(this).attr("lay-tips");var a=jquery(this).attr("lay-offset")||4;var i=jquery(this).attr("lay-color")||"#000";layer.tips(e,this,{time:-1,tips:[a,i]})}).on("mouseleave","*[lay-tips]",function(){layer.closeAll("tips")})}};admin.event={flexible:function(){var e=jquery("#"+flexibleid);var a=e.hasClass(iconspread);admin.flexible(a?"open":null)},shade:function(){admin.flexible()},refresh:function(){admin.refresh(admin.getConfig("activeTab"))},back:function(){},theme:function(){var e=jquery(this).attr("lay-url");admin.event.popupRight({id:"layer-theme",type:2,content:e?e:baseUrl.substring(_begin,_end)+"/system.admin/theme"})},message:function(){var e=jquery(this),a=e.attr("lay-url");admin.event.flowOpen({id:"layer-msg",type:2,area:["336px","390px"],content:a?a:baseUrl.substring(_begin,_end)+"/system.admin/message"},e)},pwd:function(){var e=jquery(this).attr("lay-url");admin.event.pupupOpen({id:"layer-pwd",type:2,shade:0,title:"🔑  修改密码",area:["385px","295px"],content:e?e:baseUrl.substring(_begin,_end)+"/system.admin/pwd"})},clear:function(){},logout:function(e){var a=jquery(this).attr("lay-url");layui.layer.confirm("确定要退出登录吗？",{title:admin.lang("Tips")},function(){location.replace(a?a:baseUrl.substring(_begin,_end)+"/login/logout")})},flowOpen:function(e,a){if(typeof a==="undefined"){return iziToast.info({message:admin.lang("this undefined")})}var i=0,t=a[0].getBoundingClientRect();if(e.title==undefined){e.title=false;e.closeBtn=false}e.shadeClose=true;e.area||(e.area="336px");if(e.area instanceof Array){i=e.area[0]}else{i=e.area}i=parseInt(i);e.anim||(e.anim=5);e.resize=e.resize!=undefined?e.resize:false;e.shade=e.shade!=undefined?e.shade:.1;var n=t.height,l=(a.innerWidth()-a.width())/2,r=t.left+t.width/2-i/2;if(!e.offset){e.offset=[n,r]}return layer.open(e)},pupupOpen:function(e){if(e.title==undefined){e.title=false;e.closeBtn=false}if(!e.offset){if(jquery(window).width()<768){e.offset="15px"}else{if(window==top){e.offset="25%"}else{e.offset="20%"}}}e.resize=e.resize!=undefined?e.resize:false;e.shade=e.shade!=undefined?e.shade:.1;return layer.open(e)},pupupTop:function(e){e=admin.event.popupAnim(e);e.offset=e.offset||(e.offset="t");return admin.event.pupupOpen(e)},pupupDown:function(e){e=admin.event.popupAnim(e);e.offset=e.offset||(e.offset="d");return admin.event.pupupOpen(e)},pupupLeft:function(e){e=admin.event.popupAnim(e);e.offset=e.offset||(e.offset="l");return admin.event.pupupOpen(e)},popupRight:function(e){e=admin.event.popupAnim(e);e.offset=e.offset||(e.offset="r");return admin.event.pupupOpen(e)},popupAnim:function(e){e.anim=-1;e.shadeClose=true;e.area||(e.area="336px");e.skin||(e.skin="layui-anim layui-anim-rl layui-layer-adminRight");e.move=false;if(e.fixed==undefined){e.fixed=true}return e},fullscreen:function(e){var a="layui-icon-screen-full",i="layui-icon-screen-restore",t=e.children("i");if(t.hasClass(a)){t.addClass(i).removeClass(a);admin.fullScreen()}else{admin.exitScreen();t.addClass(a).removeClass(i)}},leftPage:function(){admin.rollPage("left")},rightPage:function(){admin.rollPage()},tabs:function(){var e=jquery(this).attr("lay-url");var a=jquery(this).attr("lay-title");a||(a=jquery(this).text());if(top.layui&&top.layui.admin){top.layui.admin.render({id:e,title:a?a:"",urls:e})}else{location.href=e}},closeThisTabs:function(e){if(e!=null&&typeof e=="object"){e=admin.getConfig("activeTab")}if(admin.TabLists[0].id==e){iziToast.info({message:admin.lang("Plase Close HomePage")});return false}element.tabDelete(tabfilter,e)},closeOtherTabs:function(e){if(e!=null&&typeof e=="object"){e=admin.getConfig("activeTab")}var a=admin.TabLists;var i=a.length-1;for(;i>=1;i--){if(a[i].id!=e){element.tabDelete(tabfilter,a[i].id)}}admin.setConfig("activeTab",e)},closeAllTabs:function(){var e=admin.TabLists;var a=e.length-1;for(;a>=1;a--){element.tabDelete(tabfilter,e[a].id)}},closeDialog:function(e){var a=jquery(e).parents(".layui-layer").attr("type");if(typeof a==="undefined"){parent.layer.close(parent.layer.getFrameIndex(window.name))}else{var i=jquery(e).parents(".layui-layer").attr("id").substring(11);layer.close(i);top.layer.close(i)}},closePageDialog:function(){admin.event.closeDialog(this)},getAjaxData:function(e,a,i){var t=[],i=i||false;jquery.ajax({url:e,type:"post",data:a,async:i,success:function(e){t=e}});try{return typeof t!=="object"?JSON.parse(t):t}catch(e){console.error("result not JSON")}},callfunc:function(clickthis,collection,config,before){var callback=before?clickthis.attr("lay-callbefore"):clickthis.attr("lay-callback");if(typeof callback!=="undefined"){callback=admin.callString+callback;if(typeof eval(callback)==="function"){admin.callstatus=true;return eval(callback)(clickthis,collection,config)}}},open:function(s,d,e){var u={url:s.attr("lay-url")||undefined,type:s.attr("lay-type")||2,area:s.attr("lay-area")||"auto",offset:s.attr("lay-offset")||"15%",title:s.attr("lay-title")||false,maxmin:s.attr("lay-maxmin")||false,auto:s.attr("lay-auto")||"undefined",disableform:s.attr("lay-disable")||false};var a=0,i=.3,t;u.title!==false&&(a=1);if(typeof u.url!=="undefined"){u.id=u.url.replace(/[^0-9|a-z|A-Z]/i,"");if(u.url.indexOf("#")!==-1||u.url.indexOf(".")!==-1){if(u.url.indexOf("http://")===-1&&u.url.indexOf(".php")===-1){u.type=1;u.url=jquery(u.url).html()}}}else{if(typeof u.url==="undefined"&&typeof e==="undefined"){iziToast.error({message:"lay-url NoSeting！"});return false}}u.area!=="auto"&&(u.area=u.area.split(","));typeof e!=="undefined"&&(u=jquery.extend(u,e));if(u.type===1&&u.url){if(typeof d!=="undefined"){if(d.event=="edit"){t=u.url.match(/lay-edit=\"(.*?)\"/)}else{t=u.url.match(/lay-add=\"(.*?)\"/)}}else{t=u.url.match(/lay-add=\"(.*?)\"/)}if(!t){t=u.url.match(/\<form.*?action=\"(.*?)\"/)}t&&(t=t[1])}if(typeof u.url!=="object"&&u.type===2){t=u.url;u.url=[u.url,"no"]}if(!admin.checkAuth(t)){iziToast.error({message:admin.lang("NO Permissions!")});return false}layer.open({type:u.type,area:u.area,title:u.title,offset:u.offset,maxmin:u.maxmin,shade:i,shadeClose:true,scrollbar:false,closeBtn:a,content:u.url,success:function(e,a){var l=u.type===1?true:false;var r=typeof d!=="undefined";var i=u.disableform;u.auto!=="undefined"&&layer.iframeAuto(a);l&&form.render();if(l){if(u.url.match(/lay-upload/i)){admin.renderUpload()}if(u.url.match(/lay-datetime/i)){admin.renderDate()}if(u.url.match(/lay-colorpicker/i)){admin.renderPicker()}if(u.url.match(/lay-stars/i)){admin.renderStars()}if(u.url.match(/lay-slider/i)){admin.renderSlider()}if(u.url.match(/lay-tips/i)){admin.renderTips()}}var t=jquery(e).children(layercontent);l&&t.css("overflow","visible");!i&&l&&r&&form.val(u.id,d.data);var n=u.type===2?e.find("iframe")[0].contentWindow:null;if(admin.event.callfunc(s,{tableThis:d,layero:e,index:a},u)||admin.callstatus===true){return admin.callstatus=false}form.on("submit(submitPage)",function(t){var n=jquery(this),e=!r?n.attr("lay-add"):n.attr("lay-edit");if(typeof e==="undefined"){e=n.parents("form").attr("action")}if(typeof e==="undefined"){iziToast.error({message:admin.lang("not lay-url attr")});return false}jquery.post(e,t.field,function(e){for(var a in t.field){var i=jquery(s).parents("tr").find("*[data-field="+a+"]").find("*[lay-skin]");if(i.length!==0){delete t.field[a]}}if(e.code==200){iziToast.success({message:e.msg});l&&r?d.update(JSON.parse(JSON.stringify(t.field))):table.reload("lay-tableList");admin.event.closeDialog(n)}else{iziToast.error({message:e.msg})}},"json");return false})}})},ajax:function(a,e,i,t){var n={url:a.attr("lay-url")||"undefined",type:a.attr("lay-type")||"post",dataType:a.attr("lay-dataType")||"json",timeout:a.attr("lay-timeout")||"6000",tableId:a.attr("lay-table")||a.attr("lay-batch"),async:true},l=jquery.Deferred();if(typeof t!=="undefined"){n=jquery.extend({},n,t)}if(typeof n.url==="undefined"){iziToast.error({message:"lay-url undefined！"});return false}if(admin.event.callfunc(a,e,n,true)||admin.callstatus===true){return admin.callstatus=false}jquery.ajax({url:n.url,type:n.type,dataType:n.dataType,timeout:n.timeout,data:e,async:n.async,success:function(e){if(admin.event.callfunc(a,e,n)||admin.callstatus===true){return admin.callstatus=false}if(e.code==200){if(typeof i!=="undefined"&&typeof i.success==="function"){return i.success(e)}if(typeof n.tableId!=="undefined"){table.reload(n.tableId)}iziToast.success({message:e.msg})}else{if(typeof i!=="undefined"&&typeof i.error==="function"){return i.error(e)}iziToast.error({message:e.msg})}},error:function(e){iziToast.error({message:"Access methods failure"})}});return n}};admin.init=jquery(layoutbody),admin.setTheme(),admin.setlayFluid();admin.renderTips();admin.renderDate();admin.renderStars();admin.renderPicker();admin.renderSlider();admin.renderUpload();if(admin.init.length>=1&&typeof admin.init!=="undefined"){var tabPage=admin.getStorage("pageTabs");tabPage===false&&(admin.pageTabs=tabPage);admin.getStorage("style")==="light"&&jquery("head").append(admin.getStyleCss());admin.setOpenFooter()||admin.setOpenHeader();admin.setDropStyle()||admin.saPHPInit();if(jquery(layoutbody).children("#loading").length<=0){jquery(layoutbody).append(admin.getloadingHtml());setTimeout(function(){jquery(layoutbody).children("#loading").remove();jquery(layoutadmin).show(300)},1200)}}element.on("nav("+menufilter+")",function(e){admin.clickRender(e)});element.on("tab("+tabfilter+")",function(e){var a=jquery(this).attr("lay-id");if(a!="undefined"){admin.activeTab=a}else{admin.activeTab=undefined}admin.activeMenu(a);var i=admin.getStorage("nav")||"left";if(i==="left"||typeof i==="undefined"){var t=jquery(this).children(".title").text();if(admin.TabLists.length>=2&&i==="left"){admin.setBreadcrumb(a,t)}}admin.rollPage("auto");admin.setConfig("activeTab",a)});element.on("tabDelete("+tabfilter+")",function(e){var a=admin.TabLists[e.index];if(a&&typeof a==="object"){admin.TabLists.splice(e.index,1);if(admin.cacheTab){admin.setConfig("TabLists",admin.TabLists)}a=admin.TabLists[e.index-1];if(a&&typeof a==="object"){admin.setConfig("activeTab",a.id||a.urls)}}});var resizeSystem=layui.data.resizeSystem=function(){var e=admin.getStorage("nav")||"left";var a=jquery(window).width()-550;if(!resizeSystem.lock){setTimeout(function(){if(admin.screen()<2){admin.flexible();jquery(".layui-breadcrumb-header").hide();if(jquery(shadeclass).length<=0){jquery(layoutadmin).append(bodyshade)}}else{admin.flexible("open");jquery(".layui-breadcrumb-header").show();jquery(shadeclass).remove()}if(e==="top"||e==="hybrid"){jquery(".layui-nav-head").css({overflow:"hidden",width:a});if(a>=900){jquery(".layui-nav-head").css({overflow:"unset"})}}delete resizeSystem.lock},50)}resizeSystem.lock=true};jquery(window).on("resize",layui.data.resizeSystem);jquery(document).on("click","*[sa-event]",function(){var e=jquery(this).attr("sa-event");var a=admin.event[e];a&&a.call(this,jquery(this))});form.on("radio(radioStatus)",function(e){var a=jquery(this).attr("lay-display");if(a!=null&&a!=="undefined"){e.value==1?jquery("."+a).show():jquery("."+a).hide()}});form.on("select(selectStatus)",function(a){var e=jquery(this).parents().prev("select"),i=e.attr("lay-display"),t=e.attr("lay-disable"),n=e.attr("lay-selector");if(typeof n=="undefined"||n==null){if(typeof i!="undefined"&&typeof t=="undefined"){a.value==1?jquery("."+i).show():jquery("."+i).hide()}if(typeof i!="undefined"&&typeof t!="undefined"){a.value==t?jquery("."+i).hide():jquery("."+i).show()}}else{n=n.replace("，",",").split(",");for(let e in n){a.value!==n[e]?jquery("."+n[e]).hide():jquery("."+n[e]).show()}}});form.on("switch(switchStatus)",function(a){var e=jquery(this),i={error:function(e){jquery(a.elem).prop("checked",!a.elem.checked);form.render("checkbox");iziToast.error({message:e.msg})}},t={id:jquery(this).attr("value"),status:a.elem.checked?1:0};if(jquery(".bubble").length){jquery(".bubble").removeClass("bubble");return false}admin.event.ajax(e,t,i)});form.on("submit(submitIframe)",function(e){var a=jquery(this),i=a.parents("form"),t=i.attr("action")||false;if(typeof controller==="undefined"||typeof action==="undefined"){iziToast.error({message:admin.lang("controller or action undefined!")});return false}if(t===false||t===""){t=_header+"/"+controller+"/"+action}var n=a.attr("lay-reload")||false;if(typeof t==="undefined"){console.warn("lay-url undefined!");return false}jquery.post(t,e.field,function(e){if(e.code==200){top.layui.iziToast.success({message:e.msg});admin.event.closeDialog(a);if(n===false&&parent.window!=top){parent.location.reload()}}else{top.layui.iziToast.error({message:e.msg})}},"json");return false});form.on("submit(formSearch)",function(e){var a=e.field;table.reload("lay-tableList",{where:a})});table.on("tool(lay-tableList)",function(a){var i=a.data,t={},n=jquery(this).parents("table").find("tbody tr"),l={success:function(e){a.del();iziToast.success({message:e.msg});if(n.length-1==0||typeof n.length==="undefined"){table.reload("lay-tableList")}},error:function(e){iziToast.error({message:e.msg})}},r=jquery(this),e=r.attr("lay-title")||undefined,s=jquery(this).attr("lay-field");if(typeof s==="undefined"){t={id:i.id}}else{var d=s.split(",");for(let e in d){t[e]=i[e]}}if(a.event==="edit"){admin.event.open(r,a)}else if(a.event==="del"){var u=admin.lang("Sure you want to delete");if(typeof e!=="undefined"){u+=" "+e+" "}u+="？";if(!admin.checkAuth(r.attr("lay-url"))){iziToast.error({message:admin.lang("NO Permissions!")});return false}layer.confirm(u,function(e){admin.event.ajax(r,t,l);layer.close(e)})}else if(a.event==="ajax"){admin.event.ajax(r,t,l)}else{admin.event.open(r,a)}});jquery(document).on("click","*[lay-image-click]",function(){var e=jquery(this),a=e.attr("lay-image-click"),i=e.attr("lay-size")||undefined;if(a.length==0&&e[0].localName=="img"){a=e.attr("src")}var t=window.event||t;var n=e.width(),l=e.height();if(typeof i!=="undefined"){i=i.split(",");if(i.length>=2){n=i[0],l=i[1]}}admin.event.open(e,undefined,{type:1,area:"auto",url:'<img class="lay-images-address" src="'+a+'" width="'+n+'" height="'+l+'" >'})});jquery(document).on("mouseenter","*[lay-image-hover]",function(){var e=jquery(this),a=e.attr("lay-image-hover"),i=e.attr("lay-size")||undefined,t=e.attr("lay-remove")||undefined;if(a.length==0&&e[0].localName=="img"){a=e.attr("src")}var n=window.event||n;var l=e.width(),r=e.height();var s=n.clientX+document.body.scrollLeft+20;var d=n.clientY+document.body.scrollTop+20;if(typeof i!=="undefined"){i=i.split(",");if(i.length>=2){l=i[0],r=i[1]}}var u='<div class="lay-images-show" style="display:none;">';u+='<img class="lay-images-address" src="'+a+'" width="'+l+'" height="'+r+'" ></div>';jquery("body").append(u);jquery(".lay-images-show").css({left:s,top:d,display:"block"})}).on("mouseleave","*[lay-image-hover]",function(){jquery(".lay-images-show").remove()});jquery(document).on("click","*[lay-batch]",function(e){var a=jquery(this),i=a.attr("lay-batch")||null,t={},n=[],l=[],r=jquery(this).parents("body").find(".layui-table-main tbody *[data-field=id]"),s=table.checkStatus(i),d=admin.lang("sure you want to batch operation?");if(i===null||i===undefined){iziToast.info({message:"lay-table undefined!"});return false}if(s.data.length===0){iziToast.info({message:admin.lang("Plase check data")});return false}for(var u in s.data){n.push(s.data[u].id)}t={id:n};if(!admin.checkAuth(a.attr("lay-url"))){iziToast.error({message:admin.lang("NO Permissions!")});return false}layer.confirm(d,function(e){admin.event.ajax(a,t);layer.close(e);iziToast.destroy()})});jquery(document).on("click","*[lay-open]",function(){admin.event.open(jquery(this),undefined,{})});jquery(document).on("click","*[lay-noauth]",function(){var e=jquery(this).attr("lay-event");var a=admin.getConfig("authNode").UserGroupId.split(",");if(!a.includes("1")&&e===undefined){iziToast.error({message:admin.lang("NO Permissions!")})}});jquery(document).on("click","*[lay-ajax]",function(e){var a={},i=jquery(this).attr("lay-data")||null,t=jquery(this).attr("lay-object")||undefined;if(typeof t!=="undefined"){t=t.split(",");for(var n=0;n<t.length;n++){let e=t[n].split(":");var l=jquery("."+e[1]).val();a[e[0]]=l}}if(i!=="null"){i=new Function("return "+i)();a=jquery.extend({},a,i)}admin.event.ajax(jquery(this),a,{})});jquery(document).keyup(function(e){if(e.shiftKey&&e.keyCode==80){jquery('[sa-event="theme"]').click()}});layui.dropdown.render({elem:".layui-system-clear",data:[{title:"一键清理缓存",event:"all"},{title:"清理内容缓存",event:"content"},{title:"清理模板缓存",event:"template"},{title:"清理插件缓存",event:"plugin"}],click:function(e,a){var i=layui.layer.confirm("确定要清理缓存吗？",{title:admin.lang("Tips")},function(){admin.event.ajax(jquery(this),{},{},{url:_header+"/system.admin/clear/type/"+e.event});layui.layer.close(i)})}});jquery(layoutadmin).off("contextmenu").on("contextmenu",tabs+" li",function(e){var a=jquery(this).attr("lay-id");contextMenu.render([{name:"刷新当前",click:function(){admin.refresh(a);element.tabChange(tabfilter,a)}},{name:"关闭当前",click:function(){admin.event.closeThisTabs(a)}},{name:"关闭其他",click:function(){admin.event.closeOtherTabs(a)}},{name:"关闭全部",click:function(){admin.event.closeAllTabs(a)}}],e.clientX,e.clientY);return false});var layuiside="."+sideshrink+" .layui-side .layui-nav .layui-nav-item";jquery(document).on("mouseenter",layuiside+","+layuiside+" .layui-nav-child>dd",function(){if(admin.screen()>=2){var e=jquery(this),a=e.find(">.layui-nav-child");if(a.length>0){e.addClass("layadmin-nav-hover");a.css({width:"30px",top:e.offset().top,left:e.offset().left+e.outerWidth()})}else{if(admin.getStorage("nav")==="left"){if(e.hasClass("layui-nav-item")){var i=e.find("cite").text(),t=e.find("a").attr("lay-href");var n='<dl id="layui-nav-child" class="layui-nav-child" >';n+='<dd class="';if(e.hasClass("layui-this")){n+="layui-this"}n+='"><a lay-href="'+t+'">'+i+"</a></dd>";n+="</dl>";jquery(e).append(n);element.render("nav");e.addClass("layadmin-nav-hover");a=e.find(">.layui-nav-child");a.css({width:"30px",top:e.offset().top,left:e.offset().left+e.outerWidth()})}}else{var l=e.text();layer.tips(l,e,{tips:[2,"#303133"],time:-1,success:function(e,a){jquery(e).css("margin-top","12px")}})}}}}).on("mouseleave",layuiside+","+layuiside+" .layui-nav-child>dd",function(){layer.closeAll("tips");var e=jquery(this);e.removeClass("layadmin-nav-hover");jquery("#layui-nav-child").remove();var a=e.find("dl");a.css({left:0,top:0})});if(admin.pageTabs&&jquery(tabs).length<=0){var e='<div class="layui-tab" lay-allowClose="true" lay-filter="swiftadmin-tabs">';e+='       <ul class="layui-tab-title"></ul>';e+='      \t<div class="layui-tab-content"></div>';e+="   </div>";e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-left" sa-event="leftPage"></div>';e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-right" sa-event="rightPage"></div>';e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-down">';e+='      <ul class="layui-nav swiftadmin-tabs-select " lay-filter="swiftadmin-nav">';e+='         <li class="layui-nav-item" lay-unselect>';e+="            <a></a>";e+='            <dl class="layui-nav-child layui-anim-fadein">';e+='               <dd sa-event="closeThisTabs" lay-unselect><a>关闭当前标签页</a></dd>';e+='               <dd sa-event="closeOtherTabs" lay-unselect><a>关闭其它标签页</a></dd>';e+='               <dd sa-event="closeAllTabs" lay-unselect><a>关闭全部标签页</a></dd>';e+="            </dl>";e+="         </li>";e+="      </ul>";e+="   </div>";jquery(body).html(e);element.render("nav")}exports("admin",admin)});