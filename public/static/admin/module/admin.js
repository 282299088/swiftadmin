layui.define(["notice","form","rate","table","slider","upload","element","laydate","dropdown","colorpicker"],function(exports){"use strict";var jquery=layui.jquery,form=layui.form,rate=layui.rate,table=layui.table,slider=layui.slider,element=layui.element,laydate=layui.laydate,notice=layui.notice,colorpicker=layui.colorpicker,tabfilter="swiftadmin-tabs",body=".layui-body",layoutbody=".layui-layout-body",layoutadmin=".layui-layout-admin",tabs=body+">.layui-tab",flexibleid="flexible",menufilter="lay-side-menu",menutopfilter="lay-top-menu",sideshrink="layadmin-side-shrink",sidespread="layadmin-side-spread-sm",iconshrink="layui-icon-shrink-right",iconspread="layui-icon-spread-left",bodyshade='<div class="layadmin-body-shade" sa-event="shade"></div>',shadeclass=".layadmin-body-shade",layercontent=".layui-layer-content",authorizeUrl=jquery("#authorize").attr("lay-url");void 0!==authorizeUrl&&layui.sessionData("authorizeUrl",{key:"url",value:authorizeUrl});var navTreeHtml=jquery(".layui-nav-tree").attr("lay-statichtml"),admin={init:void 0,table:"swiftadmin",version:"1.0.4",getMenu:layui.sessionData("authorizeUrl").url,pageTabs:!0,cacheTab:!0,maxTabNum:20,TabLists:[],callback:{},callstatus:!1,callString:"admin.callback.",activeTab:void 0,loading:function(e){var a=admin.getConfig("TabLists"),i=admin.getConfig("activeTab");if(null!=a&&null!=i||admin.render({id:e.urls,title:e.title,urls:e.urls}),(null==e.inits||e.inits)&&"object"==typeof a){if(!0===admin.pageTabs)for(var t in a)admin.render({id:a[t].id,urls:a[t].urls,title:a[t].title});else admin.render({id:a.id,urls:a.urls,title:a.title}),admin.activeTab=a.id,admin.setConfig("activeTab",a.urls),admin.activeMenu(a.id),admin.setBreadcrumb(a.urls,a.title);element.tabChange(tabfilter,i)}},render:function(e){if(e.urls){var a=e.id||e.urls,i=e.urls,t=e.title;if(admin.pageTabs){if(admin.TabLists.length+1>=admin.maxTabNum)return notice.info({message:admin.lang("Max Open")+admin.maxTabNum+admin.lang("TAB")}),!1;var n=jquery(tabs+'>.layui-tab-title [lay-id="'+a+'"]');if(n&&1<=n.length)return element.tabChange(tabfilter,a),!1;t=-1!=t.indexOf("layui-icon")?'<span class="title">'+(t||"")+"</span>":'<em class="circle"></em><span class="title">'+(t||"")+"</span>",element.tabAdd(tabfilter,{id:a,title:t,content:'<iframe id="youjian" lay-id="'+i+'" src="'+i+'" frameborder="0" onload="layui.admin.removeLoading(this)"  class="swiftadmin-iframe"></iframe>'}),admin.TabLists.push(e),admin.cacheTab&&admin.setConfig("TabLists",admin.TabLists);n=admin.getStorage("nav");"left"!==n&&void 0!==n||admin.setBreadHtml(),2<=admin.TabLists.length&&"left"===n&&admin.setBreadcrumb(i,t),admin.showLoading(jquery('iframe[lay-id="'+i+'"]').parent()),element.render("breadcrumb"),element.tabChange(tabfilter,a)}else{n=jquery(".swiftadmin-iframe");void 0===n||n.length<=0?(admin.setBreadHtml(),a='<div id="swiftadmin-iframe">',a+=' <iframe lay-id="'+i+'" src="'+i+'" frameborder="0" onload="layui.admin.removeLoading(this)" class="swiftadmin-iframe"></iframe>',a+="</div>",jquery(layoutadmin+">"+body).html(a)):(n.attr("lay-id",i),n.attr("src",i),admin.setBreadcrumb(i,t)),admin.showLoading(jquery("#swiftadmin-iframe")),admin.cacheTab&&admin.setConfig("TabLists",e),admin.setConfig("activeTab",i),admin.activeTab=i,element.render("breadcrumb")}}else notice.info({message:admin.lang("Menu addr not empty!")})},saPHPInit:function(e=!1){var a,i=admin.getConfig("authnodes");"false"==navTreeHtml&&(void 0!==i&&!e||(i=admin.event.getAjaxData(admin.getMenu),admin.setConfig("authnodes",i)),a=admin.getNavHtml(i._admin_auth_menus_),"hybrid"===admin.getStorage("nav")?admin.getNavhybrid(i._admin_auth_menus_):("top"===admin.getStorage("nav")?parent.layui.jquery(".layui-nav-top"):parent.layui.jquery(".layui-nav-tree")).html(a),jquery(".layui-nav-top").find("span.layui-nav-bar").remove()),"top"===admin.getStorage("nav")&&(element.on("nav("+menutopfilter+")",function(e){var a=jquery(this);a.parent("dd").siblings().children(".layui-nav-third").hide(),a.parent("dd").siblings().children("dl").children("dl").hide(),admin.clickRender(e)}),jquery(".layui-side-menu").hide(),jquery(".layui-layout-left").css("left","0"),jquery(".layui-footer").css("left","0"),jquery(layoutadmin+">"+body).css("left","0"),jquery('[sa-event="flexible"]').removeAttr("sa-event"),jquery(".layui-third-class").on("click",function(e){jquery(this).parent("dd").siblings().children(".layui-nav-third").hide(),jquery(this).next().show();var a=jquery(this);a.parent().find(">.layui-nav-third").css({top:"0px",left:a.outerWidth()+2})})),"hybrid"===admin.getStorage("nav")&&jquery(".layui-nav-head .layui-nav-item a").on("click",function(e){var a=jquery(this).attr("lay-nav-bind");void 0!==a&&(jquery("div[class^='swift-admin']").hide(),jquery("."+a).show())}),parent.layui.element.render("nav"),!1!==e&&parent.layui.admin.activeMenu(admin.getConfig("activeTab"))},clickRender:function(e){var a=jquery(e),i=a.attr("lay-id"),t=a.attr("lay-href"),i=i||t;t&&"javascript:;"!=t&&(e=(e=a.attr("sa-title"))||a.text().replace(/(^\s*)|(\s*$)/g,""),admin.render({id:i,urls:t,title:e})),admin.screen()<2&&0==a.children(".layui-nav-more").length&&admin.flexible()},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},getPath:function(){var e=document.currentScript?document.currentScript.src:function(){for(var e,a=document.scripts,i=a.length-1,t=i;0<t;t--)if("interactive"===a[t].readyState){e=a[t].src;break}return e||a[i].src}();return e.substring(0,e.lastIndexOf("/")+1)},setBreadHtml:function(){var e='<div class="layui-breadcrumb-header layui-breadcrumb" lay-separator="/">';e+='      <a lay-href="#">'+admin.lang("Home")+"</a>",e+='      <span class="breadcrumb">',e+='          <a lay-href="#">Dashboard</a>',e+="      </span>",e+="   </div>",jquery(".layui-breadcrumb-header").length<=0&&(jquery(".layui-nav-head").before(e),jquery(".layui-nav-head").hide()),admin.screen()<2&&jquery(".layui-breadcrumb-header").hide()},setBreadcrumb:function(e,a){for(var i="",t=jquery('.layui-nav-tree li [lay-href="'+e+'"]'),n=jquery(t).parents().find(".layui-nav-itemed"),l=0;l<n.length;l++)1<=jquery(n[l]).find('[lay-href="'+e+'"]').length&&(i+='<a lay-href="#" >'+jquery(n[l]).find("a:first").text()+'</a><span lay-separator="">/</span>');i+='<a lay-href="'+e+'">'+a+"</a>",jquery(".breadcrumb").html(i)},flexible:function(e){var a=jquery(layoutbody),i=jquery("#"+flexibleid),t=admin.screen();e?(i.removeClass(iconspread).addClass(iconshrink),t<2?a.addClass(sidespread):a.removeClass(sidespread),a.removeClass(sideshrink),jquery(shadeclass).length<=0&&jquery(layoutadmin).append(bodyshade)):(i.removeClass(iconshrink).addClass(iconspread),t<2?a.removeClass(sideshrink):a.addClass(sideshrink),a.removeClass(sidespread),jquery(layoutadmin).removeClass(bodyshade))},screen:function(){var e=jquery(window).width();return 1200<e?3:992<e?2:768<e?1:0},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==a&&a&&a.call(e)},exitScreen:function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},lang:function(e){var a=admin.getStorage("language"),i={"zh-cn":{"this undefined":"对象未定义","Plase Close HomePage":"请不要关闭主页！","lay-url NoSeting":"未设置","NO Permissions!":"没有权限！","File Upload...":"文件上传中","The lack of DIV elements":"请添加包含多图上传的DIV元素！","Menu addr not empty!":"菜单地址不能为空","Max Open":"最多打开",TAB:"选项卡",Tips:"提示",Home:"首页","not lay-url attr":"按钮缺少 url 属性","Plase check data":"请选择数据","sure you want to batch operation?":"确定要批量操作吗？","Sure you want to delete":"确定要删除","controller or action undefined!":"控制器或方法JS未定义！"}};return"en-us"!==a&&i[a=void 0===i[a]?"zh-cn":a][e]||e},rollPage:function(e,a){var i,t=jquery(tabs+">.layui-tab-title"),n=t.scrollLeft();"left"===e?t.animate({scrollLeft:n-120},100):"auto"===e?(i=0,t.children("li").each(function(){return!jquery(this).hasClass("layui-this")&&void(i+=jquery(this).outerWidth())}),t.animate({scrollLeft:i-120},100)):t.animate({scrollLeft:n+120},100)},activeMenu:function(e){var a=admin.getStorage("nav")||"left";jquery(".layui-nav li").removeClass("layui-this"),jquery(".layui-nav li").removeClass("layui-nav-itemed"),jquery(".layui-nav li dd").removeClass("layui-this"),jquery(".layui-nav li dd").removeClass("layui-nav-itemed");var i,t=jquery('.layui-nav li dd [lay-href="'+e+'"]');"hybrid"===a&&(void 0!==(i=jquery('.layui-nav-tree [lay-href="'+e+'"]').parents("div").attr("class"))&&jquery('[lay-nav-bind="'+i).parent("li").addClass("layui-this"),jquery("div[class^='swift-admin']").hide(),jquery("."+i).show()),t&&0<t.length&&"top"!==a?(t.parent("dd").addClass("layui-this"),t.parent("dd").parents("dd").addClass("layui-nav-itemed"),t.parent("dd").parents("li").addClass("layui-nav-itemed")):jquery('ul li [lay-href="'+e+'"]').parent().addClass("layui-this")},checkAuth:function(i){if(!i||"true"==navTreeHtml)return!0;var e;-1===i.indexOf("://")&&(e=(i=(i=i.replace(".html","")).substring(1)).substring(0,i.indexOf("/")),-1!=i.indexOf(".php")&&(e=(e=i.replace(e,"").substring(1)).substring(0,e.indexOf("/"))),-1!==(a=i.substring(i.indexOf(e)+e.length+1)).indexOf("/")?a=a.substring(0,a.indexOf("/")):-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),i=e+":"+a);function t(e){for(var a in e){a=e[a];i==a.alias&&(n=!0),a.children,t(a.children)}return n||!1}var n,a=admin.getConfig("authnodes");return!(!a.supersadmin&&-1===i.indexOf("://")&&!t(a._admin_auth_menus_))},setConfig:function(e,a){var i=admin.table+"_template";null!=a&&"undefined"!==a?layui.sessionData(i,{key:e,value:a}):layui.sessionData(i,{key:e,remove:!0})},getConfig:function(e){var a=admin.table+"_template",a=layui.sessionData(a);return!!a&&a[e]},setStorage:function(e,a){var i=admin.table+"_system";null!=a&&"undefined"!==a?layui.data(i,{key:e,value:a}):layui.data(i,{key:e,remove:!0})},getStorage:function(e){var a=admin.table+"_system",a=layui.data(a);return!!a&&a[e]},refresh:function(a){if(null==a)return!1;if(!admin.pageTabs){var i=jquery('iframe[lay-id="'+a+'"]');return jquery("#loading").show(),i[0].contentWindow.location.reload(!0)}i=jquery(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<i.length;e++)jquery(i[e]).attr("lay-id")==a&&(i[e].contentWindow.location.reload(!0),jquery(i[e]).next("#loading").css({overflow:"hidden",display:"block"}))},showLoading:function(e){var a=this.getloadingHtml(),i=jquery(e).children("#loading");i.length<=0?jquery(e).append(a):i.show()},removeLoading:function(e){e=jquery(e).next("#loading");e&&e.fadeOut(500)},getloadingHtml:function(){return'<div id="loading"><div class="loader"><div class="ant-spin ant-spin-spinning" ><span class="ant-spin-dot ant-spin-dot-spin"><i class="ant-spin-dot-item"></i><i class="ant-spin-dot-item"></i><i class="ant-spin-dot-item"></i><i class="ant-spin-dot-item"></i> </span></div></div></div>'},getNavHtml:function(e,a){for(var i="",t=admin.getStorage("nav")||"left",n=0;n<e.length;n++){var l=e[n];l.children&&"#"===l.router?(0===l.pid||"hybrid"===t&&"parent"!==a?i+='<li class="layui-nav-item">':(i+="<dd>",l.fixed=!0),"left"===t||"hybrid"===t||0===l.pid?i+='<a href="javascript:;">':i+='<a href="javascript:;" class="layui-third-class" >',!l.icons||"left"!==t&&"hybrid"!==t||(i+='<i class="layui-icon '+l.icons+'"></i>'),0===l.pid&&"left"===t?i+="<cite>"+l.title+"</cite>":i+=l.title,"left"===t||"hybrid"===t||0===l.pid||"hybrid"===t||"left"===t?i+='</a><dl class="layui-nav-child">':i+='<i class="layui-icon layui-icon-right"></i></a><dl class="layui-nav-third">',i+="hybrid"===t?this.getNavHtml(l.children,"parent"):this.getNavHtml(l.children,a+n),i+="</dl>"):0===l.pid||"hybrid"===t&&"parent"!==a?(i+='<li class="layui-nav-item" >',"#"==l.router?i+='<a href="javascript:;" >':i+='<a href="javascript:;" target="_self" lay-href="'+l.router+'">',!l.icons||"left"!==t&&"hybrid"!==t||(i+='<i class="layui-icon '+l.icons+'"></i>'),i+="<cite>"+l.title+"</cite>",i+="</a></li>"):0==l.type&&("#"==l.router?i+='<dd><a href="javascript:;">':0==l.type&&(i+='<dd><a lay-href="'+l.router+'">'),!l.icons||"left"!==t&&"hybrid"!==t||(i+='<i class="layui-icon '+l.icons+'"></i>'),i+=l.title+"</a></dd>"),void 0!==l.fixed&&(i+="</dd>"),(0===l.pid||"hybrid"===t&&"parent"!==a)&&(i+="</li>"),24==l.id&&"left"===t&&(i+='<div class="layui-other-set">设置</div>  ')}return i},getNavhybrid:function(a,e){var i="",t="";for(let e=0;e<a.length;e++){var n=a[e],l="swift-admin-"+(e+1);if(0===n.pid){i+='<li class="layui-nav-item layui-hide-xs ',0===e&&(i+="layui-this"),i+='">';try{n.children?i+='<a href="javascript:;" lay-nav-bind="'+l+'" >'+n.title+"</a>":(i+='<a href="javascript:;" lay-nav-bind="'+l+'" sa-event="tabs" lay-url="'+n.router,i+='" lay-title="'+n.title+'" >'+n.title+"</a>"),i+="</li>"}catch(e){console.log(e)}a[e].nav=l}n.children&&"#"===n.router&&(t+='<div class="'+n.nav+'"',0===e&&(t+='style="display:block;"'),t+=">",t+=admin.getNavHtml(n.children),t+="</div>")}jquery(".layui-nav-top").html(i),jquery(".layui-nav-tree").html(t)},getStyleCss:function(){return'<style id="style-light">.layadmin-setTheme-side, .layui-side-menu,.layui-layout-admin .layui-logo,.layui-nav-itemed>.layui-nav-child{background-color: #fff!important;color: #000;}.layui-side-menu .layui-nav .layui-nav-item>a,.layui-nav-tree .layui-nav-child,.layui-nav-itemed>a, .layui-nav-tree .layui-nav-title a, .layui-nav-tree .layui-nav-title a:hover,.layui-side .layui-logo h1,.layui-side-menu .layui-nav .layui-nav-item>a, .layui-nav-tree .layui-nav-child a,.layui-layout-admin .layui-side .layui-nav .layui-other-set {color: #000!important;}.layui-nav-tree .layui-nav-child, .layui-nav-tree .layui-nav-child a:hover {color: #1890ff!important;}.layui-nav-tree .layui-nav-child .layui-this a { color: #fff!important;}.layui-nav .layui-nav-more { border-top-color: rgba(0,0,0,.7);}.layui-nav .layui-nav-mored, .layui-nav-itemed>a .layui-nav-more {border-color: transparent transparent #000;}.layadmin-side-shrink .layui-side .layui-nav .layadmin-nav-hover>.layui-nav-child:before{background-color: #fff; }.layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-itemed>a{background: #f2f2f2;}</style>'},setTheme:function(){var a="blue"===(a=admin.getStorage("theme"))?"":a;if(admin.getStorage("pageTabs")){var i=top.layui.$(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<i.length;e++)jquery(i[e]).contents().find("body").attr("id",a)}else top.layui.$("iframe").contents().find("body").attr("id",a);top.layui.$("body").attr("id",a)},setDropStyle:function(){var e=admin.getStorage("dropstyle");void 0!==e&&(top.layui.$(".layui-nav-tree").removeClass("arrow1 arrow2 arrow3"),top.layui.$(".layui-nav-tree").addClass(e))},setlayFluid:function(){var a=admin.getStorage("layout"),i='<style id="lay-fluid">.layui-fluid{padding: 50px;}</style>';if(admin.getStorage("pageTabs")&&void 0!==a){var t=top.layui.$(tabs+" .layui-tab-item").find("iframe");for(let e=0;e<t.length;e++)"fixed"===a?jquery(t[e]).contents().find("head").find("#lay-fluid").length<=0&&jquery(t[e]).contents().find("head").append(i):jquery(t[e]).contents().find("#lay-fluid").remove()}else void 0!==a&&("fixed"===a?top.layui.$("iframe").contents().find("#lay-fluid").length<=0&&top.layui.$("iframe").contents().find("head").append(i):top.layui.$("iframe").contents().find("#lay-fluid").remove())},setOpenHeader:function(){var e=admin.getStorage("openheader");!1===e?(top.layui.$(".layui-header,.layui-logo").hide(),top.layui.$(".layui-nav-tree,.layui-body").css({top:"0px","margin-top":"0px"})):!0===e&&(top.layui.$(".layui-header,.layui-logo").show(),top.layui.$(".layui-nav-tree").css("margin-top","60px"),top.layui.$(".layui-body").css("top","50px"))},setOpenFooter:function(){var e=admin.getStorage("openfooter");!1===e?top.layui.$(".layui-footer").hide():!0===e&&top.layui.$(".layui-footer").show()},renderUpload:function(){layui.upload.render({elem:"*[lay-upload]",url:"/upload/file",method:"post",accept:"file",before:function(e){notice.info({message:admin.lang("File Upload..."),timeout:3e4})},done:function(e,a,i){layui.notice.destroy({time:500});var t=jquery(this.item).attr("lay-input"),n=jquery(this.item).attr("lay-images"),l=jquery(this.item).attr("lay-imglist");if(admin.event.callfunc(this.item,{res:e,index:a,upload:i},{input:t,images:n,imglist:l})||!0===admin.callstatus)return admin.callstatus=!1;200==e.code?(notice.success({message:e.msg}),void 0!==l?0<jquery("."+l).length?(i='<div class="layui-imglist-images" >',i+='<a href="'+e.url+'" class="layui-upload-imglist" target="_blank >',i+='<img src="'+e.url+'" alt="" class="layui-upload-images">',i+="</a>",i+="</div>",jquery("."+l).append(i)):notice.error({message:admin.lang("The lack of DIV elements")}):(void 0!==t&&jquery("."+t).prop("value",e.url),void 0!==n&&jquery("."+n).prop("src",e.url))):notice.error({message:e.msg})}})},renderDate:function(){jquery("*[lay-datetime]").each(function(e){laydate.render({elem:this,type:"datetime",format:"yyyy-MM-dd HH:mm:ss"})})},renderPicker:function(){jquery("*[lay-colorpicker]").each(function(e,a){colorpicker.render({elem:this,color:jquery(a).attr("lay-value"),done:function(e){jquery("."+jquery(a).attr("lay-colorpicker")).val(e)}})})},renderStars:function(){layui.each(jquery("*[lay-stars]"),function(e,a){var i=jquery(this),t=i.attr("lay-stars"),n=i.attr("lay-url")||void 0,l=i.attr("lay-object")||void 0,r=i.attr("lay-theme")||"#fadb14",s=i.attr("lay-class")||void 0,d=i.attr("lay-readonly")||!1;rate.render({elem:a,theme:r,readonly:d,value:i.attr("lay-value"),choose:function(e){if("ones"==t)return jquery("."+s).attr("value",e),!1;jquery.get(n,{id:l,stars:e},function(e){200==e.code?notice.success({message:e.msg}):notice.error({message:e.msg})},"json")}})})},renderSlider:function(){layui.each(jquery("*[lay-slider]"),function(e,a){var i=jquery(this),t=i.attr("lay-slider"),i=i.attr("lay-theme")||"#1E9FFF";slider.render({elem:a,theme:i,value:jquery(a).attr("lay-value"),change:function(e){jquery("."+t).val(e)}})})},renderTips:function(){jquery(document).on("mouseenter","*[lay-tips]",function(){var e=jquery(this).attr("lay-tips"),a=jquery(this).attr("lay-offset")||4,i=jquery(this).attr("lay-color")||"#000";layer.tips(e,this,{time:-1,tips:[a,i]})}).on("mouseleave","*[lay-tips]",function(){layer.closeAll("tips")})}},tabPage;admin.event={flexible:function(){var e=jquery("#"+flexibleid).hasClass(iconspread);admin.flexible(e?"open":null)},shade:function(){admin.flexible()},refresh:function(){admin.refresh(admin.getConfig("activeTab"))},back:function(){},theme:function(){var e=jquery(this).attr("lay-url");admin.event.popupRight({id:"layer-theme",type:2,content:e})},message:function(){var e=jquery(this),a=e.attr("lay-url");admin.event.flowOpen({id:"layer-msg",type:2,area:["336px","390px"],content:a},e)},pwd:function(){var e=jquery(this).attr("lay-url");admin.event.pupupOpen({id:"layer-pwd",type:2,shade:0,title:"🔑  修改密码",area:["385px","295px"],content:e})},clear:function(){},logout:function(e){var a=jquery(this).attr("lay-url");layui.layer.confirm("确定要退出登录吗？",{title:admin.lang("Tips")},function(){location.replace(a)})},flowOpen:function(e,a){if(void 0===a)return notice.info({message:admin.lang("this undefined")});var i=0,t=a[0].getBoundingClientRect();null==e.title&&(e.title=!1,e.closeBtn=!1),e.shadeClose=!0,e.area||(e.area="336px"),i=e.area instanceof Array?e.area[0]:e.area,i=parseInt(i),e.anim||(e.anim=5),e.resize=null!=e.resize&&e.resize,e.shade=null!=e.shade?e.shade:.1;var n=t.height,i=(a.innerWidth(),a.width(),t.left+t.width/2-i/2);return e.offset||(e.offset=[n,i]),layer.open(e)},pupupOpen:function(e){return null==e.title&&(e.title=!1,e.closeBtn=!1),e.offset||(jquery(window).width()<768?e.offset="15px":window==top?e.offset="25%":e.offset="20%"),e.resize=null!=e.resize&&e.resize,e.shade=null!=e.shade?e.shade:.1,layer.open(e)},pupupTop:function(e){return(e=admin.event.popupAnim(e)).offset=e.offset||(e.offset="t"),admin.event.pupupOpen(e)},pupupDown:function(e){return(e=admin.event.popupAnim(e)).offset=e.offset||(e.offset="d"),admin.event.pupupOpen(e)},pupupLeft:function(e){return(e=admin.event.popupAnim(e)).offset=e.offset||(e.offset="l"),admin.event.pupupOpen(e)},popupRight:function(e){return(e=admin.event.popupAnim(e)).offset=e.offset||(e.offset="r"),admin.event.pupupOpen(e)},popupAnim:function(e){return e.anim=-1,e.shadeClose=!0,e.area||(e.area="336px"),e.skin||(e.skin="layui-anim layui-anim-rl layui-layer-adminRight"),e.move=!1,null==e.fixed&&(e.fixed=!0),e},fullscreen:function(e){var a="layui-icon-screen-full",i="layui-icon-screen-restore",e=e.children("i");e.hasClass(a)?(e.addClass(i).removeClass(a),admin.fullScreen()):(admin.exitScreen(),e.addClass(a).removeClass(i))},leftPage:function(){admin.rollPage("left")},rightPage:function(){admin.rollPage()},tabs:function(){var e=jquery(this).attr("lay-url"),a=(a=jquery(this).attr("lay-title"))||jquery(this).text();top.layui&&top.layui.admin?top.layui.admin.render({id:e,title:a||"",urls:e}):location.href=e},closeThisTabs:function(e){if(null!=e&&"object"==typeof e&&(e=admin.getConfig("activeTab")),admin.TabLists[0].id==e)return notice.info({message:admin.lang("Plase Close HomePage")}),!1;element.tabDelete(tabfilter,e)},closeOtherTabs:function(e){null!=e&&"object"==typeof e&&(e=admin.getConfig("activeTab"));for(var a=admin.TabLists,i=a.length-1;1<=i;i--)a[i].id!=e&&element.tabDelete(tabfilter,a[i].id);admin.setConfig("activeTab",e)},closeAllTabs:function(){for(var e=admin.TabLists,a=e.length-1;1<=a;a--)element.tabDelete(tabfilter,e[a].id)},closeDialog:function(e){void 0===jquery(e).parents(".layui-layer").attr("type")?parent.layer.close(parent.layer.getFrameIndex(window.name)):(e=jquery(e).parents(".layui-layer").attr("id").substring(11),layer.close(e),top.layer.close(e))},closePageDialog:function(){admin.event.closeDialog(this)},getAjaxData:function(e,a,i){var t=[],i=i||!1;jquery.ajax({url:e,type:"post",data:a,async:i,success:function(e){t=e}});try{return"object"!=typeof t?JSON.parse(t):t}catch(e){console.error("result not JSON")}},callfunc:function(clickthis,collection,config,before){var callback=before?clickthis.attr("lay-callbefore"):clickthis.attr("lay-callback");if(void 0!==callback&&(callback=admin.callString+callback,"function"==typeof eval(callback)))return admin.callstatus=!0,eval(callback)(clickthis,collection,config)},open:function(r,s,e){var a,d={url:r.attr("lay-url")||void 0,type:r.attr("lay-type")||2,area:r.attr("lay-area")||"auto",offset:r.attr("lay-offset")||"15%",title:r.attr("lay-title")||!1,maxmin:r.attr("lay-maxmin")||!1,auto:r.attr("lay-auto")||"undefined",scrollbar:r.attr("lay-scrollbar")||"undefined",disableform:r.attr("lay-disable")||!1};if(void 0!==d.url)d.id=d.url.replace(/[^0-9|a-z|A-Z]/i,""),-1===d.url.indexOf("#")&&-1===d.url.indexOf(".")||-1===d.url.indexOf("http://")&&-1===d.url.indexOf(".php")&&(d.type=1,d.url=jquery(d.url).html());else if(void 0===d.url&&void 0===e)return notice.error({message:"lay-url NoSeting！"}),!1;if("auto"!==d.area&&(d.area=d.area.split(",")),"auto"!==d.area&&"100%"==d.area[0]&&(d.offset=0),1===(d=void 0!==e?jquery.extend(d,e):d).type&&d.url&&(a=(a=void 0!==s&&"edit"==s.event?d.url.match(/lay-edit=\"(.*?)\"/):d.url.match(/lay-add=\"(.*?)\"/))||d.url.match(/\<form.*?action=\"(.*?)\"/),void 0!==s&&-1!=d.url.indexOf("lay-disabled")&&(e=jquery(d.url),jquery(e).find("*[lay-disabled]").addClass("layui-disabled").attr("disabled",""),d.url=e.prop("outerHTML")),a=a&&a[1]),"object"!=typeof d.url&&2===d.type&&(a=d.url,void 0===d.scrollbar&&(d.url=[d.url,"no"])),!admin.checkAuth(a))return notice.error({message:admin.lang("NO Permissions!")}),!1;layer.open({type:d.type,area:d.area,title:d.title,offset:d.offset,maxmin:d.maxmin,shade:.3,shadeClose:!1,scrollbar:!1,closeBtn:1,content:d.url,success:function(e,a){var n=1===d.type,l=void 0!==s,i=d.disableform;"undefined"!==d.auto&&layer.iframeAuto(a),n&&form.render(),n&&(d.url.match(/lay-upload/i)&&admin.renderUpload(),d.url.match(/lay-datetime/i)&&admin.renderDate(),d.url.match(/lay-colorpicker/i)&&admin.renderPicker(),d.url.match(/lay-stars/i)&&admin.renderStars(),d.url.match(/lay-slider/i)&&admin.renderSlider(),d.url.match(/lay-tips/i)&&admin.renderTips());var t=jquery(e).children(layercontent);n&&t.css("overflow","visible"),!i&&n&&l&&form.val(d.id,s.data);2===d.type&&e.find("iframe")[0].contentWindow;if(admin.event.callfunc(r,{tableThis:s,layero:e,index:a},d)||!0===admin.callstatus)return admin.callstatus=!1;form.on("submit(submitPage)",function(i){var t=jquery(this),e=l?t.attr("lay-edit"):t.attr("lay-add");return void 0===(e=void 0===e?t.parents("form").attr("action"):e)?notice.error({message:admin.lang("not lay-url attr")}):(t.attr("disabled",!0),jquery.post(e,i.field,function(e){for(var a in i.field)0!==jquery(r).parents("tr").find("*[data-field="+a+"]").find("*[lay-skin]").length&&delete i.field[a];200==e.code?(notice.success({message:e.msg}),n&&l?s.update(JSON.parse(JSON.stringify(i.field))):table.reload("lay-tableList"),admin.event.closeDialog(t)):(notice.error({message:e.msg}),t.attr("disabled",!1))},"json")),!1})}})},ajax:function(i,e,t,n){var a={url:i.attr("lay-url")||"undefined",type:i.attr("lay-type")||"post",dataType:i.attr("lay-dataType")||"json",timeout:i.attr("lay-timeout")||"6000",confirm:i.attr("lay-confirm"),tableId:i.attr("lay-table")||i.attr("lay-batch"),async:!0};if(!admin.checkAuth(i.attr("lay-url")))return notice.error({message:admin.lang("NO Permissions!")}),!1;function l(a){return void 0===(a=void 0!==n?jquery.extend({},a,n):a).url?(notice.error({message:"lay-url undefined！"}),!1):admin.event.callfunc(i,e,a,!0)||!0===admin.callstatus?admin.callstatus=!1:(jquery.ajax({url:a.url,type:a.type,dataType:a.dataType,timeout:a.timeout,data:e,async:a.async,success:function(e){if(admin.event.callfunc(i,e,a)||!0===admin.callstatus)return admin.callstatus=!1;if(200==e.code){if(void 0!==t&&"function"==typeof t.success)return t.success(e);void 0!==a.tableId&&table.reload(a.tableId),notice.success({message:e.msg})}else{if(void 0!==t&&"function"==typeof t.error)return t.error(e);notice.error({message:e.msg})}},error:function(e){notice.error({message:"Access methods failure"})}}),a)}if(void 0===a.confirm)return l(a);a.confirm=a.confirm||"确定执行此操作吗?",layer.confirm(a.confirm,function(e){return layer.close(e),l(a)},function(e){return layer.close(e),!1})}},admin.init=jquery(layoutbody),admin.setTheme(),admin.setlayFluid(),admin.renderTips(),admin.renderDate(),admin.renderStars(),admin.renderPicker(),admin.renderSlider(),admin.renderUpload(),1<=admin.init.length&&void 0!==admin.init&&(tabPage=admin.getStorage("pageTabs"),!1===tabPage&&(admin.pageTabs=tabPage),"light"===admin.getStorage("style")&&jquery("head").append(admin.getStyleCss()),admin.setOpenFooter()||admin.setOpenHeader(),admin.setDropStyle()||admin.saPHPInit(),admin.screen()<=1&&jquery("#"+flexibleid).removeClass(iconshrink).addClass(iconspread),jquery(layoutbody).children("#loading").length<=0&&(jquery(layoutbody).append(admin.getloadingHtml()),setTimeout(function(){jquery(layoutbody).children("#loading").remove(),jquery(layoutadmin).show(300)},1200))),element.on("nav("+menufilter+")",function(e){admin.clickRender(e)}),element.on("tab("+tabfilter+")",function(e){var a=jquery(this).attr("lay-id");admin.activeTab="undefined"!=a?a:void 0,admin.activeMenu(a);var i,t=admin.getStorage("nav")||"left";"left"!==t||(i=jquery(this).children(".title").text(),2<=admin.TabLists.length&&"left"===t&&admin.setBreadcrumb(a,i)),admin.rollPage("auto"),admin.setConfig("activeTab",a)}),element.on("tabDelete("+tabfilter+")",function(e){var a=admin.TabLists[e.index];a&&"object"==typeof a&&(admin.TabLists.splice(e.index,1),admin.cacheTab&&admin.setConfig("TabLists",admin.TabLists),(a=admin.TabLists[e.index-1])&&"object"==typeof a&&admin.setConfig("activeTab",a.id||a.urls))});var resizeSystem=layui.data.resizeSystem=function(){var e=admin.getStorage("nav")||"left",a=jquery(window).width()-550;resizeSystem.lock||setTimeout(function(){admin.screen()<2?(admin.flexible(),jquery(".layui-breadcrumb-header").hide(),jquery(shadeclass).length<=0&&jquery(layoutadmin).append(bodyshade)):(admin.flexible("open"),jquery(".layui-breadcrumb-header").show(),jquery(shadeclass).remove()),"top"!==e&&"hybrid"!==e||(jquery(".layui-nav-head").css({overflow:"hidden",width:a}),900<=a&&jquery(".layui-nav-head").css({overflow:"unset"})),delete resizeSystem.lock},50),resizeSystem.lock=!0};jquery(window).on("resize",layui.data.resizeSystem),jquery(document).on("click","*[sa-event]",function(){var e=jquery(this).attr("sa-event"),e=admin.event[e];e&&e.call(this,jquery(this))}),form.on("radio(radioStatus)",function(e){var a=jquery(this).attr("lay-display");null!=a&&"undefined"!==a&&(1==e.value?jquery("."+a).show():jquery("."+a).hide())}),form.on("select(selectStatus)",function(e){var a=jquery(this).parents().prev("select"),i=a.attr("lay-display"),t=a.attr("lay-disable"),n=a.attr("lay-selector");if(void 0===n||null==n)void 0!==i&&void 0===t&&(1==e.value?jquery("."+i).show():jquery("."+i).hide()),void 0!==i&&void 0!==t&&(e.value==t?jquery("."+i).hide():jquery("."+i).show());else for(var l in n=n.replace("，",",").split(","))e.value!==n[l]?jquery("."+n[l]).hide():jquery("."+n[l]).show()}),form.on("switch(switchStatus)",function(a){var e=jquery(this),i={error:function(e){jquery(a.elem).prop("checked",!a.elem.checked),form.render("checkbox"),notice.error({message:e.msg})}},t={id:jquery(this).attr("value"),status:a.elem.checked?1:0};if(jquery(".bubble").length)return jquery(".bubble").removeClass("bubble"),!1;admin.event.ajax(e,t,i)}),form.on("submit(submitIframe)",function(e){var a=jquery(this),i=a.parents("form").attr("action")||!1;if("undefined"==typeof controller||"undefined"==typeof action)return notice.error({message:admin.lang("controller or action undefined!")}),!1;if(!1===i||""===i)try{i=app+"/"+controller+"/"+action}catch(e){console.warn(e)}var t=a.attr("lay-reload")||!1;return void 0===i?console.warn("lay-url undefined!"):(a.attr("disabled",!0),jquery.post(i,e.field,function(e){200==e.code?(top.layui.notice.success({message:e.msg}),admin.event.closeDialog(a),!1===t&&parent.window!=top?parent.location.reload():parent.layui.table.cache["lay-tableList"]&&parent.layui.table.reload("lay-tableList")):top.layui.notice.error({message:e.msg}),a.attr("disabled",!1)},"json")),!1}),form.on("submit(formSearch)",function(e){e=e.field;table.reload("lay-tableList",{page:{curr:1},where:e})}),table.on("tool(lay-tableList)",function(a){var e,i=a.data,t={},n=jquery(this).parents("table").find("tbody tr"),l={success:function(e){a.del(),notice.success({message:e.msg}),n.length-1!=0&&void 0!==n.length||table.reload("lay-tableList")},error:function(e){notice.error({message:e.msg})}},r=jquery(this),s=r.attr("lay-title")||void 0,d=jquery(this).attr("lay-field");if(void 0===d)t={id:i.id};else for(e in d.split(","))t[e]=i[e];if("edit"===a.event)admin.event.open(r,a);else if("del"===a.event){d=admin.lang("Sure you want to delete");if(void 0!==s&&(d+=" "+s+" "),d+="？",!admin.checkAuth(r.attr("lay-url")))return notice.error({message:admin.lang("NO Permissions!")}),!1;layer.confirm(d,function(e){admin.event.ajax(r,t,l),layer.close(e)})}else"ajax"===a.event?admin.event.ajax(r,t,l):admin.event.open(r,a)}),jquery(document).on("click","*[lay-image-click]",function(){var e=jquery(this),a=e.attr("lay-image-click"),i=e.attr("lay-size")||void 0;0==a.length&&"img"==e[0].localName&&(a=e.prop("src"));var t=window.event||t,n=e.width(),t=e.height();void 0!==i&&2<=(i=i.split(",")).length&&(n=i[0],t=i[1]),admin.event.open(e,void 0,{type:1,area:"auto",url:'<img class="lay-images-address" src="'+a+'" width="'+n+'" height="'+t+'" >'})}),jquery(document).on("mouseenter","*[lay-image-hover]",function(){var e=jquery(this),a=e.attr("lay-image-hover"),i=e.attr("lay-size")||void 0;e.attr("lay-remove");0==a.length&&"img"==e[0].localName?a=e.prop("src"):"input"==e[0].localName&&(a=e.prop("value"));var t=window.event||t,n=e.width(),l=e.height(),e=t.clientX+document.body.scrollLeft+20,t=t.clientY+document.body.scrollTop+20;if(void 0!==i?2<=(i=i.split(",")).length&&(n=i[0],l=i[1]):(n="150",l="180"),void 0===a||!a)return!1;i='<div class="lay-images-show" style="display:none;">';i+='<img class="lay-images-address" src="'+a+'" width="'+n+'" height="'+l+'" ></div>',jquery("body").append(i),jquery(".lay-images-show").css({left:e,top:t,display:"block"})}).on("mouseleave","*[lay-image-hover]",function(){jquery(".lay-images-show").remove()}),jquery(document).on("click","*[lay-batch]",function(e){var a=jquery(this),i=a.attr("lay-batch")||null,t=a.attr("lay-field")||void 0,n=(jquery(this).parents("body").find(".layui-table-main tbody *[data-field=id]"),table.checkStatus(i)),l=admin.lang("sure you want to batch operation?");if(null===i)return notice.info({message:"lay-table undefined!"}),!1;var r=["id"];if(void 0!==t&&(r=r.concat(t.split(","))),0===n.data.length)return notice.info({message:admin.lang("Plase check data")}),!1;var s,t={};for(s in r){var d,o=r[s];for(d in r[o]=[],n.data)r[o].push(n.data[d][o]);t[o]=r[o]}layer.confirm(l,function(e){admin.event.ajax(a,t),layer.close(e),notice.destroy({time:500})})}),jquery(document).on("click","*[lay-open]",function(){admin.event.open(jquery(this),void 0,{})}),jquery(document).on("click","*[lay-noauth]",function(){var e=jquery(this).attr("lay-event");admin.getConfig("authnodes").supersadmin||void 0!==e||notice.error({message:admin.lang("NO Permissions!")})}),jquery(document).on("click","*[lay-ajax]",function(e){var a={},i=jquery(this).attr("lay-data")||null;if(void 0!==(t=jquery(this).attr("lay-object")||void 0))for(var t=t.split(","),n=0;n<t.length;n++){var l=t[n].split(":"),r=jquery("."+l[1]).val();a[l[0]]=r}"null"!==i&&(i=new Function("return "+i)(),a=jquery.extend({},a,i)),admin.event.ajax(jquery(this),a,{})}),jquery(document).keyup(function(e){e.shiftKey&&80==e.keyCode&&jquery('[sa-event="theme"]').click()});var clearUrl=jquery(".layui-system-clear").attr("lay-url");layui.dropdown.render({elem:".layui-system-clear",data:[{title:"一键清理缓存",event:"all"},{title:"清理内容缓存",event:"content"},{title:"清理模板缓存",event:"template"},{title:"清理插件缓存",event:"plugin"}],click:function(e,a){var i=layui.layer.confirm("确定要清理缓存吗？",{title:admin.lang("Tips")},function(){admin.event.ajax(jquery(this),{},{},{url:clearUrl+e.event}),layui.layer.close(i)})}}),jquery("body").off("contextmenu").on("contextmenu",tabs+" li",function(e){var i=jquery(this).attr("lay-id"),a=jquery(this);return layui.dropdown.render({elem:a,trigger:"contextmenu",style:"width: 110px;text-align:center;",id:i,show:!0,data:[{title:"刷新当前",id:"refresh"},{title:"关闭当前",id:"closeThisTabs"},{title:"关闭其他",id:"closeOtherTabs"},{title:"关闭全部",id:"closeAllTabs"}],click:function(e,a){"refresh"===e.id?(admin.refresh(i),element.tabChange(tabfilter,i)):"closeThisTabs"===e.id?admin.event.closeThisTabs(i):"closeOtherTabs"===e.id?admin.event.closeOtherTabs(i):"closeAllTabs"===e.id&&admin.event.closeAllTabs(i)}}),!1});var layuiside="."+sideshrink+" .layui-side .layui-nav .layui-nav-item",e;jquery(document).on("mouseenter",layuiside+","+layuiside+" .layui-nav-child>dd",function(){var e,a,i,t,n;2<=admin.screen()&&(0<(n=(e=jquery(this)).find(">.layui-nav-child")).length?(e.addClass("layadmin-nav-hover"),n.css({width:"30px",top:e.offset().top,left:e.offset().left+e.outerWidth()})):"left"===admin.getStorage("nav")?e.hasClass("layui-nav-item")&&(a=e.find("cite").text(),i=e.find("a").attr("lay-href"),t='<dl id="layui-nav-child" class="layui-nav-child" >',t+='<dd class="',e.hasClass("layui-this")&&(t+="layui-this"),t+='"><a lay-href="'+i+'">'+a+"</a></dd>",t+="</dl>",jquery(e).append(t),element.render("nav"),e.addClass("layadmin-nav-hover"),(n=e.find(">.layui-nav-child")).css({width:"30px",top:e.offset().top,left:e.offset().left+e.outerWidth()})):(n=e.text(),layer.tips(n,e,{tips:[2,"#303133"],time:-1,success:function(e,a){jquery(e).css("margin-top","12px")}})))}).on("mouseleave",layuiside+","+layuiside+" .layui-nav-child>dd",function(){layer.closeAll("tips");var e=jquery(this);e.removeClass("layadmin-nav-hover"),jquery("#layui-nav-child").remove(),e.find("dl").css({left:0,top:0})}),admin.pageTabs&&jquery(tabs).length<=0&&(e='<div class="layui-tab" lay-allowClose="true" lay-filter="swiftadmin-tabs">',e+='       <ul class="layui-tab-title"></ul>',e+='          <div class="layui-tab-content"></div>',e+="   </div>",e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-left" sa-event="leftPage"></div>',e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-right" sa-event="rightPage"></div>',e+='   <div class="layui-icon swiftadmin-tabs-control layui-icon-down">',e+='      <ul class="layui-nav swiftadmin-tabs-select " lay-filter="swiftadmin-nav">',e+='         <li class="layui-nav-item" lay-unselect>',e+="            <a></a>",e+='            <dl class="layui-nav-child layui-anim-fadein">',e+='               <dd sa-event="closeThisTabs" lay-unselect><a>关闭当前标签页</a></dd>',e+='               <dd sa-event="closeOtherTabs" lay-unselect><a>关闭其它标签页</a></dd>',e+='               <dd sa-event="closeAllTabs" lay-unselect><a>关闭全部标签页</a></dd>',e+="            </dl>",e+="         </li>",e+="      </ul>",e+="   </div>",jquery(body).html(e),element.render("nav")),exports("admin",admin)});